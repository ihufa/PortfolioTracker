(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{246:function(e,t,a){},248:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(72),o=a.n(l),s=(a(84),a(23)),i=a.n(s),c=a(73),u=a(77),m=a(3),p=a(4),h=a(6),d=a(5),f=a(7),k=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleChangeTick=function(e){a.setState({ticker:e.target.value})},a.handleChangeVolume=function(e){a.setState({volume:e.target.value})},a.submitHandler=function(e){e.preventDefault();var t=a.props.stocks.map(function(e){return e.ticker});""!==a.state.ticker&&-1===t.indexOf(a.state.ticker)&&a.props.addStock(a.state)},a.updateHandler=function(e){e.preventDefault(),a.props.updateStocks()},a.addFive=function(e){e.preventDefault(),a.setState({stocks:[{ticker:"TSLA"},{ticker:"AAPL"},{ticker:"GOOGL"},{ticker:"AMZN"},{ticker:"NVO"}]}),a.props.addFive()},a.disabledBtnHandler=function(e){e.preventDefault()},a.state={ticker:"",volume:0},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"stockadder watchlist-inside-wrap"},n.a.createElement("h2",null,"Watchlist"),n.a.createElement("form",null,n.a.createElement("input",{type:"text",onChange:this.handleChangeTick,placeholder:"Add up to 5 assets...",id:"stockticker"}),n.a.createElement("button",{className:"fromBtn Btn",type:"submit",onClick:this.submitHandler},"Add"),n.a.createElement("button",{className:"fromBtn Btn",onClick:this.addFive},"Im feeling lucky"),n.a.createElement("br",null),this.props.stocks.length>0?n.a.createElement("button",{className:"startsimBtnReady Btn",onClick:this.updateHandler},"Start simulator"):n.a.createElement("button",{className:"startsimBtnNo",onClick:this.disabledBtnHandler},"Start simulator")))}}]),t}(r.Component),g=a(78),E=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState({volume:e.target.value,ticker:a.props.ticker,timeOfPurchase:a.props.time,price:a.props.price,currentPrice:a.props.price,id:"".concat(a.props.ticker,"+").concat(Date.now())})},a.handleBuy=function(e){e.preventDefault(),a.state.volume>0&&a.props.handleBuy(a.state),a.props.modalOK()},a.handleClose=function(e){e.preventDefault(),console.log(e.target),"modal"!==e.target.className&&a.props.handleClose()},a.state={volume:0,timeOfPurchase:0,price:0,currentPrice:0,timeOfSell:"still held"},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{onClick:this.handleClose,style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:100}},n.a.createElement("div",{className:"modal-form modal",style:{backgroundColor:"#22201e",borderRadius:3,border:"2px solid orange",width:450,height:75,margin:"auto",marginTop:250,position:"relative",zIndex:101}},n.a.createElement("h3",{className:"modal"},this.props.modalMessage),n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("span",{className:"modal"},this.props.ticker),n.a.createElement("span",{className:"modal"},"$",this.props.price),n.a.createElement("input",{className:"modal",onChange:this.handleChange,type:"number",placeholder:"Volume"})," ",n.a.createElement("span",{className:"modal"},Math.round(this.props.price*this.state.volume).toLocaleString(),"$"),n.a.createElement("button",{className:"BuyBtn modal-BuyBtn",onClick:this.handleBuy},"Buy")))))}}]),t}(r.Component),v=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).deleteHandler=function(e){e.preventDefault(),a.props.deleteStock(e.target.id)},a.showGraphHandler=function(e){e.preventDefault(),a.props.showGraph(e.target.name)},a.buyHandler=function(e){e.preventDefault(),a.setState(Object(g.a)({},a.state,{showBuyModal:!a.state.showBuyModal,ticker:e.target.name}))},a.modalOK=function(){a.setState({showBuyModal:!1})},a.state={ticker:"",volume:0,showBuyModal:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return this.state.showBuyModal?n.a.createElement(E,{ticker:this.state.ticker,price:this.props.watchlist[this.props.watchlist.findIndex(function(t){return t.ticker===e.state.ticker})].prices[99],time:this.props.watchlist[this.props.watchlist.findIndex(function(t){return t.ticker===e.state.ticker})].times[99],handleBuy:this.props.handleBuy,modalOK:this.modalOK,updatePortfolioData:this.props.updatePortfolioData,handleClose:this.modalOK}):0!==Object.keys(void 0!==this.props.watchlist[0]&&this.props.watchlist[0]).length?n.a.createElement("div",{className:"watchlist-inside-wrap"},n.a.createElement("h2",null,"Watchlist"),n.a.createElement("table",{className:"watchlist"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Stock ticker:"),n.a.createElement("th",null,"Price:"),n.a.createElement("th",null))),n.a.createElement("tbody",null,this.props.watchlist.map(function(t){return n.a.createElement("tr",{key:t.ticker,onMouseOver:e.showGraphHandler},n.a.createElement("td",{className:"ticker"},t.ticker),n.a.createElement("td",{className:"price"},"$",t.prices[t.prices.length-1]),n.a.createElement("td",null,n.a.createElement("button",{className:"Graph-btn",name:t.ticker,onClick:e.showGraphHandler},"Graph")),n.a.createElement("td",null,n.a.createElement("button",{className:"BuyBtn",name:t.ticker,onClick:e.buyHandler},"Buy")))})))):this.props.stocks.length>0?n.a.createElement("div",{className:"watchlist-inside-wrap"},n.a.createElement("table",{className:"watchlist"},n.a.createElement("tbody",null,this.props.stocks.map(function(t){return n.a.createElement("tr",{key:t.ticker},n.a.createElement("td",{className:"ticker"},t.ticker),n.a.createElement("td",null,n.a.createElement("button",{className:"Btn",id:t.ticker,onClick:e.deleteHandler},"Remove")))})))):null}}]),t}(r.Component),b=a(74),y=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={finalGraphData:{labels:[],datasets:[{label:"Portfolio",data:[]}]}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){if(0!==Object.keys(void 0!==this.props.graphData&&this.props.graphData).length){var e={labels:this.props.graphData.times,datasets:[{label:this.props.graphData.ticker,data:this.props.graphData.prices,backgroundColor:"transparent",borderColor:"rgb(238, 150, 17)",pointRadius:0,pointHitRadius:2,display:!1,cubicInterpolationMode:"monotone",responsive:!0,maintainAspectRatio:!1}]};return n.a.createElement("div",{className:"chartwrap"},n.a.createElement(b.a,{data:e,options:{title:{display:this.props.graphData.ticker,text:this.props.graphData.ticker,fontSize:16},elements:{line:{tension:0}},scales:{xAxes:[{type:"time",time:{displayFormats:{minute:"h:mm a"}}}]},legend:{display:!1,position:"position"}}}))}return null}}]),t}(r.Component),w=a(76),S=a.n(w),O=(a(246),function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(e){e.preventDefault(),console.log(e.target),"modal"!==e.target.className&&a.props.sellReject()},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{onClick:this.handleClose,style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:100}},n.a.createElement("div",{className:"modal",style:{backgroundColor:"#22201e",borderRadius:3,border:"2px solid orange",width:450,height:75,margin:"auto",marginTop:250,position:"relative",zIndex:101}},n.a.createElement("h3",{className:"modal"},n.a.createElement("span",null,"Are you sure you want to sell ",this.props.stock.volume," ",this.props.stock.ticker," stocks for ",n.a.createElement("span",{className:"green"},(this.props.stock.price*this.props.stock.volume).toLocaleString("en")),"?",n.a.createElement("br",null),n.a.createElement("button",{className:"Btn",onClick:this.props.sellApproved},"Yes"),n.a.createElement("button",{className:"Btn",onClick:this.props.sellReject},"No")))))}}]),t}(r.Component)),N=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).sellHandler=function(e){e.preventDefault(),console.log(a.props.portfolio.filter(function(t){return t.id===e.target.id})[0].ticker),a.setState({showSellConfirmation:!0,id:e.target.id,ticker:a.props.portfolio.filter(function(t){return t.id===e.target.id})[0].ticker,volume:a.props.portfolio.filter(function(t){return t.id===e.target.id})[0].volume,price:a.props.portfolio.filter(function(t){return t.id===e.target.id})[0].price})},a.sellApproved=function(){a.props.sellStock(a.state.id),a.setState({showSellConfirmation:!1})},a.sellReject=function(){a.setState({showSellConfirmation:!1})},a.state={ticker:"",volume:0,showSellConfirmation:!1,id:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){for(var e=this,t=0,a=0;a<this.props.portfolio.length;a++)t+=this.props.portfolio[a].price*this.props.portfolio[a].volume;for(var r=0,l=0;l<this.props.portfolio.length;l++)r+=this.props.portfolio[l].currentPrice*this.props.portfolio[l].volume;return this.props.portfolio.length>0?n.a.createElement("div",{className:"watchlist-inside-wrap"},n.a.createElement("h2",null,"Portfolio"),this.state.showSellConfirmation&&n.a.createElement(O,{sellApproved:this.sellApproved,sellReject:this.sellReject,stock:this.state}),n.a.createElement("table",{className:"watchlist"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Purchased(EST)"),n.a.createElement("th",null,"Stock"),n.a.createElement("th",null,"Volume"),n.a.createElement("th",null,"Purchase Price"),n.a.createElement("th",null,"Current Price"),n.a.createElement("th",null,"Value")," ",n.a.createElement("th",null,"Result %")," ",n.a.createElement("th",null," $"),n.a.createElement("th",null))),n.a.createElement("tbody",null,this.props.portfolio.map(function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.timeOfPurchase),n.a.createElement("td",null,t.ticker),n.a.createElement("td",null,t.volume),n.a.createElement("td",null,"$",t.price.toLocaleString("en")),n.a.createElement("td",null,"$",t.currentPrice.toLocaleString("en")),n.a.createElement("td",null,"$",(Math.round(100*t.currentPrice*t.volume)/100).toLocaleString("en")),n.a.createElement("td",{className:t.currentPrice/t.price>=1?"green-result":"red-result",id:"results1"},"%",(Math.round(1e4*(t.currentPrice/t.price-1))/100).toLocaleString("en")),n.a.createElement("td",{className:t.currentPrice/t.price>=1?"green-result":"red-result",id:"results2"},"$",(Math.round(100*(t.currentPrice*t.volume-t.price*t.volume))/100).toLocaleString("en")),n.a.createElement("td",null,n.a.createElement("button",{className:"Btn",id:t.id,onClick:e.sellHandler},"Sell")))}),n.a.createElement("tr",null,n.a.createElement("td",{className:"portfolio-sum"},"Portfolio Summary"),n.a.createElement("td",null),n.a.createElement("td",null),n.a.createElement("td",{className:"portfolio-sum"},"$",t.toLocaleString("en")),n.a.createElement("td",null),n.a.createElement("td",{className:"portfolio-sum"},"$",r.toLocaleString("en")),n.a.createElement("td",{className:r/t>=1?"green-result":"red-result"},"%",(100*(r/t-1)).toLocaleString("en")),n.a.createElement("td",{className:r/t>=1?"green-result":"red-result"},"$",(r-t).toLocaleString("en")),n.a.createElement("td",null))))):n.a.createElement("div",{className:"watchlist-inside-wrap"},n.a.createElement("h2",null,"Portfolio is empty"),n.a.createElement("table",{className:"watchlist"}))}}]),t}(r.Component),C=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(e){e.preventDefault(),console.log(e.target),"modal"!==e.target.className&&a.props.handleClose()},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{onClick:this.handleClose,style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:100}},n.a.createElement("div",{className:"modal",style:{backgroundColor:"#22201e",borderRadius:3,border:"2px solid orange",width:450,height:75,margin:"auto",marginTop:250,position:"relative",zIndex:101}},n.a.createElement("h3",{className:"modal"},n.a.createElement("span",null,"Too many API requests. You probably refreshed the page and started simulation within one minute. Please wait one minute and try again!",n.a.createElement("button",{onClick:this.handleClose},"X")))))}}]),t}(r.Component),j=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).toggleSwitch=function(){a.setState({toggleOn:!a.state.toggleOn})},a.state={toggleOn:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.history.map(function(e){return e.price*e.volume}).reduce(function(e,t){return e+t},0),a=this.props.history.map(function(e){return e.currentPrice*e.volume}).reduce(function(e,t){return e+t},0);if(this.state.toggleOn){if(this.state.toggleOn&&0!==this.props.history.length){var r=this.props.history;return n.a.createElement("div",{className:"watchlist-wrap"},n.a.createElement("div",{className:"watchlist-inside-wrap"},n.a.createElement("h2",null,n.a.createElement("span",{className:"toggler",onClick:this.toggleSwitch}," - "),"History"),n.a.createElement("table",{className:"watchlist"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Stock ticker:"),n.a.createElement("th",null,"Volume"),n.a.createElement("th",null,"Purchased"),n.a.createElement("th",null,"Price"),n.a.createElement("th",null,"Sold"),n.a.createElement("th",null,"Price"),n.a.createElement("th",null,"Result"))),n.a.createElement("tbody",null,r.map(function(r){return n.a.createElement("tr",{key:r.ticker},n.a.createElement("td",null,r.ticker),n.a.createElement("td",null," ",r.volume),n.a.createElement("td",null,r.timeOfPurchase),n.a.createElement("td",{onMouseOver:e.hoverHandler},(r.price*r.volume).toLocaleString("en")),n.a.createElement("td",null,r.timeOfSell),n.a.createElement("td",{onMouseOver:e.hoverHandler},(r.currentPrice*r.volume).toLocaleString("en")),n.a.createElement("td",{className:a-t>=0?"green-result":"red-result"},(r.currentPrice*r.volume-r.price*r.volume).toLocaleString("en")))}),n.a.createElement("tr",null,n.a.createElement("td",{className:"portfolio-sum"},"Total"),n.a.createElement("td",null),n.a.createElement("td",null),n.a.createElement("td",{className:"portfolio-sum"},t.toLocaleString("en")),n.a.createElement("td",null),n.a.createElement("td",{className:"portfolio-sum"},a.toLocaleString("en")),n.a.createElement("td",{className:a-t>=0?"green-result":"red-result"},(a-t).toLocaleString("en")))))))}return n.a.createElement("div",{className:"watchlist-wrap"},n.a.createElement("div",{className:"watchlist-inside-wrap"},n.a.createElement("h2",null,n.a.createElement("span",{className:"toggler",onClick:this.toggleSwitch}," - "),"History is empty")))}return n.a.createElement("div",{className:"closed-history"},n.a.createElement("h2",null,n.a.createElement("span",{className:"toggler",onClick:this.toggleSwitch}," + "),n.a.createElement("span",null,"History")))}}]),t}(r.Component),D=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).errorClose=function(){a.setState({showError:!1})},a.deleteStock=function(e){a.setState({stocks:a.state.stocks.filter(function(t){return t.ticker!==e})})},a.addStock=function(e){a.state.stocks.length<5?a.setState({stocks:a.state.stocks.concat(e)}):alert("Maximum portfoliosize is 5")},a.addFive=function(){a.setState({stocks:[{ticker:"TSLA"},{ticker:"AAPL"},{ticker:"GOOGL"},{ticker:"AMZN"},{ticker:"M&M"}]})},a.showGraph=function(e){void 0!==e&&a.setState({stockDisplay:a.state.graphData.findIndex(function(t){return t.ticker===e})})},a.handleBuy=function(e){console.log(e),a.updateHistory(e,"buy");var t=a.state.portfolio.concat(e);a.setState({portfolio:t}),setTimeout(a.updatePortfolioData,1e3)},a.sellStock=function(e){a.updateHistory(e,"sell")},a.updateHistory=function(e,t){var r=[],n=[];if("buy"===t)r=a.state.history.concat(e);else{(r=JSON.parse(JSON.stringify(a.state.history)))[r.findIndex(function(t){return t.id===e})].timeOfSell=a.state.portfolioData.times[a.state.portfolioData.times.length-1];var l=(n=JSON.parse(JSON.stringify(a.state.portfolio))).findIndex(function(t){return t.id===e});console.log("sellIndex"+l),n.splice(l,1)}a.setState({portfolio:n,history:r})},a.updatePortfolioData=function(){if(a.state.portfolio.length>0){for(var e=[],t=[],r=[],n=0;n<a.state.portfolio.length;n++)for(var l=0;l<a.state.graphData.length;l++)a.state.portfolio[n].ticker===a.state.graphData[l].ticker&&r.push(l);for(var o=function(t){e[t]={pricesProd:a.state.graphData[r[t]].prices.map(function(e){return e*a.state.portfolio[t].volume}),times:a.state.graphData[r[t]].times}},s=0;s<a.state.portfolio.length;s++)o(s);for(var i=function(t){var r=e[t].times.findIndex(function(e){return e===a.state.portfolio[t].timeOfPurchase});e[t].pricesProd=e[t].pricesProd.slice(r),e[t].times=e[t].times.slice(r)},c=0;c<e.length;c++)i(c);for(var m=e[0].pricesProd.length-1;m>-1;m--){for(var p=0,h=0;h<a.state.portfolio.length;h++)p+=e[h].pricesProd[m];t.unshift(p)}for(var d=Object(u.a)(a.state.portfolio),f=0;f<a.state.portfolio.length;f++)d[f].currentPrice=a.state.graphData[r[f]].prices[99];a.setState({portfolioData:{prices:t,times:e[0].times,ticker:"Portfolio"},portfolio:d})}},a.updateStocks=Object(c.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.apiSummary=[],a.setState({showStockadder:!1,apiData:[]}),"RNMW9AOG5O5M2LRV",t=i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=".concat(a.state.stocks[t].ticker,"&interval=1min&apikey=").concat("RNMW9AOG5O5M2LRV")).then(function(e){for(var r=[],n=Object.keys(e.data["Time Series (1min)"]).reverse(),l=0;l<n.length;l++)r=r.concat(Math.round(1e3*parseFloat(e.data["Time Series (1min)"][n[l]]["4. close"]))/1e3);a.apiSummary.push({times:n,prices:r,volume:a.state.stocks[t].volume,ticker:a.state.stocks[t].ticker})}).catch(function(e){a.setState({showError:"too many api requests! this api-key supports up to 5 per minute",stocks:[],showStockadder:!0})});case 2:case"end":return e.stop()}},e,this)}),r=0;case 5:if(!(r<a.state.stocks.length)){e.next=10;break}return e.delegateYield(t(r),"t0",7);case 7:r++,e.next=5;break;case 10:a.setState({graphData:a.apiSummary}),setTimeout(a.updatePortfolioData,2e3),setTimeout(a.updateStocks,64e3);case 13:case"end":return e.stop()}},e,this)})),a.apiSummary=[],a.state={apiData:[],stocks:[],graphData:[{}],stockDisplay:0,portfolio:[],portfolioData:[],history:[],showStockadder:!0,showError:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"page-container"},this.state.showError&&n.a.createElement(C,{handleClose:this.errorClose}),n.a.createElement("h1",null,n.a.createElement("span",null,"PORTFOLIO")," TRACKER"),n.a.createElement("div",{className:"list-and-graph-wrap"},n.a.createElement("div",{className:"watchlist-wrap"},this.state.showStockadder&&n.a.createElement(k,{stocks:this.state.stocks,addFive:this.addFive,addStock:this.addStock,updateStocks:this.updateStocks}),n.a.createElement(v,{stocks:this.state.stocks,watchlist:this.state.graphData,deleteStock:this.deleteStock,showGraph:this.showGraph,handleBuy:this.handleBuy,updatePortfolioData:this.updatePortfolioData})),n.a.createElement("div",{className:"chart"},n.a.createElement(y,{graphData:this.state.graphData[this.state.stockDisplay]}))),n.a.createElement("div",{className:"list-and-graph-wrap"},n.a.createElement("div",{className:"watchlist-wrap"},n.a.createElement(N,{portfolio:this.state.portfolio,graphData:this.state.graphData,sellStock:this.sellStock})),n.a.createElement("div",{className:"chart"},n.a.createElement(y,{graphData:this.state.portfolioData}))),n.a.createElement("div",{className:"list-and-graph-wrap"},n.a.createElement(j,{history:this.state.history}),n.a.createElement("div",null)))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,a){e.exports=a(248)},84:function(e,t,a){}},[[79,2,1]]]);
//# sourceMappingURL=main.553da3aa.chunk.js.map